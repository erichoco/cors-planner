define(["require","exports","module","api/yql","api/parser"],function(e,t){function o(e,t,u){u=u||0;if(u===0){if(i[e])return;i[e]=!0,$.publish("module:fetching",e)}else if(u===s){$.publish("module:"+e+":fetched"),$.publish("message:error","Fetching data for Module "+e+" failed, Please try again later.");return}n.requestModule(e,function(n){var s=r.parse(n);s!==null?(s.isAvailable?t(s):$.publish("message:error","Module "+e+" is not available now."),delete i[e],$.publish("module:"+e+":fetched")):o(e,t,u+1)})}var n=e("api/yql"),r=e("api/parser"),i={},s=3;t.crawl=o});