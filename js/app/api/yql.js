define(["require","exports","module","util/helper"],function(e,t){function i(e){return"https://aces01.nus.edu.sg/cors/jsp/report/ModuleDetailedInfo.jsp?acad_y="+e.acadYear+"&sem_c="+e.semester+"&mod_c="+e.modCode.toUpperCase()}function s(e){return"http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(e)+"&format=json"}function o(e,t){return function(n){n.url=e,t(n)}}function u(e){return $.ajax({type:"GET",dataType:"jsonp",contentType:"application/x-javascript",url:e,xhrFields:{widthCredentials:!1}})}var n=e("util/helper"),r=$.extend({},{modCode:"ACC1002"},n.getSemester());t.request=function(e,t){return u(s(e)).success(o(e,t))},t.requestModule=function(e,t){typeof e=="string"&&(e={modCode:e});var n=i($.extend({},r,e)),a="select * from html where url='"+n+"' and xpath='//table'";u(s(a)).success(o(n,t))}});