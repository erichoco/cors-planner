define(["require","exports","module","modal/modules"],function(require,exports){var ModuleList=require("modal/modules"),modules,previews;modules=new ModuleList(planner.list.modules),previews=new ModuleList(planner.list.previews),$.subscribe("module:add",function(e,m){var mod=previews.get(m);mod?(previews.remove(mod),modules.add(mod)):modules.add(m)}),$.subscribe("module:preview",function(e,m){var mod=modules.get(m)||previews.get(m);mod?$.publish("module:detail",mod):previews.add(m)}),$.subscribe(planner.list.previews+":addOne",function(){previews.length()>20&&previews.clean()})})