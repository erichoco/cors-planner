define(["require","exports","module","util/store","util/helper"],function(e,t){function o(){$("#semester").text("Year "+r.acadYear+" SEM"+r.semester).on("dblclick",function(){$.publish("module:clean")})}function u(t){t=n.get("cors-modules"),t&&t.latestUpdate===planner.dataUpdate?i.typeahead({source:t.data}):e(["corsModulesData"],function(e){n.set("cors-modules",{latestUpdate:planner.dataUpdate,data:e}),i.typeahead({source:e})})}function a(){i.on("focus",function(e){this.select()}),i.on("keydown",function(e){e.which===13&&f(function(e){$.publish("module:add",[e])})(e)}),s.on("click",f(function(e){$.publish("module:add",[e])}))}function f(e){return function(t){t.preventDefault();var n=i.val().split(" ")[0];n&&/^[a-z]{2,3}\d{4}[a-z]?$/i.test(n)?(i.val(""),e(n)):$.publish("message:error",["The Module Code: "+n+" is not Valid!"])}}var n=e("util/store"),r=e("util/helper").getSemester(),i=$("#mod-code"),s=$("#add-btn");t.init=function(){o(),u(),a()},$.subscribe("app:window:resize",function(){var e=$("#add-module").width();$("#add-module").find("#mod-code").width(e-74)})});