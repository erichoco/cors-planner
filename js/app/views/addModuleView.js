define(["require","exports","module","util/store","util/helper"],function(require,exports){function updateSemester(){$("#semester").text("Year "+sem.acadYear+" SEM"+sem.semester)}function attachTypeahead(cors){cors=store.get("cors-modules"),cors&&cors.latestUpdate===planner.dataUpdate?$input.typeahead({source:cors.data}):require(["corsModulesData"],function(data){store.set("cors-modules",{latestUpdate:planner.dataUpdate,data:data}),$input.typeahead({source:data})})}function attachEvents(){$input.on("focus",function(){this.select()}),$addBtn.on("click",_clickEvent(function(modCode){$.publish("module:add",[modCode])})),$prevBtn.on("click",_clickEvent(function(modCode){$.publish("module:preview",[modCode])}))}function _clickEvent(callback){return function(e,modCode){e.preventDefault(),modCode=$input.val().split(" ")[0],modCode&&/^[a-z]{2,3}\d{4}[a-z]?$/i.test(modCode)?($input.val(""),callback(modCode)):window.alert("The module code entered is not valid!")}}var store=require("util/store"),sem=require("util/helper").getSemester(),$input=$("#mod-code"),$addBtn=$("#add-btn"),$prevBtn=$("#preview-btn");exports.init=function(){updateSemester(),attachTypeahead(),attachEvents()}})