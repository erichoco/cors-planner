define(["require","exports","module","view/moduleView"],function(require,exports){function _getElWidth(){var $modules=$el.find(".module"),len=$modules.length,width=$modules.outerWidth();return(width+10)*len}var moduleView=require("view/moduleView"),$el=$("#basket-scroll"),$basket=$("#basket");exports.init=function(){$el.on("click","h3",function(){$.publish("module:preview",$(this).text())}),$basket.droppable({accept:".bar",active:"remove-bar-active",hoverClass:"remove-bar-hover",drop:function(event,ui){var data=ui.draggable.data("slot");data.elem.addClass("draggable").draggable("enable"),ui.helper.remove(),ui.draggable.remove()}})},$.subscribe("modules:addOne",function(e,mod){$el.prepend(moduleView.render(mod)).css("width",_getElWidth())})})